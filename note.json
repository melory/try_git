{
    "paragraphs": [
        {
            "config": {
                "colWidth": 12, 
                "graph": {
                    "mode": "table", 
                    "height": 300, 
                    "optionOpen": false, 
                    "keys": [ ], 
                    "values": [ ], 
                    "groups": [ ], 
                    "scatter": { }
                }, 
                "enabled": true, 
                "editorMode": "ace/mode/scala"
            }, 
            "settings": {
                "params": { }, 
                "forms": { }
            }, 
            "jobName": "paragraph_1462958047797_-1164004879", 
            "id": "20160511-171407_553093184", 
            "dateCreated": "May 11, 2016 5:14:07 PM", 
            "status": "FINISHED", 
            "progressUpdateIntervalMs": 500, 
            "$$hashKey": "object:1253", 
            "text": "%md
## Welcome to Aliyun E-MapReduce. This is a Zeppelin sample.
##### This is a live tutorial, you can run the code yourself. (Shift-Enter to Run)", 
            "dateUpdated": "May 11, 2016 5:14:21 PM", 
            "dateFinished": "May 11, 2016 5:14:21 PM", 
            "dateStarted": "May 11, 2016 5:14:21 PM", 
            "result": {
                "code": "SUCCESS", 
                "type": "HTML", 
                "msg": "<h2>Welcome to Aliyun E-MapReduce. This is a Zeppelin sample.</h2>
<h5>This is a live tutorial, you can run the code yourself. (Shift-Enter to Run)</h5>
"
            }
        }, 
        {
            "config": {
                "colWidth": 12, 
                "graph": {
                    "mode": "table", 
                    "height": 300, 
                    "optionOpen": false, 
                    "keys": [ ], 
                    "values": [ ], 
                    "groups": [ ], 
                    "scatter": { }
                }, 
                "enabled": true
            }, 
            "settings": {
                "params": { }, 
                "forms": { }
            }, 
            "jobName": "paragraph_1462958061062_1168358277", 
            "id": "20160511-171421_1907418790", 
            "dateCreated": "May 11, 2016 5:14:21 PM", 
            "status": "FINISHED", 
            "progressUpdateIntervalMs": 500, 
            "focus": true, 
            "$$hashKey": "object:1270", 
            "dateUpdated": "May 11, 2016 5:14:32 PM", 
            "dateFinished": "May 11, 2016 5:14:34 PM", 
            "dateStarted": "May 11, 2016 5:14:33 PM", 
            "result": {
                "code": "SUCCESS", 
                "type": "TEXT", 
                "msg": "import org.apache.commons.io.IOUtils
import java.net.URL
import java.nio.charset.Charset
bankText: org.apache.spark.rdd.RDD[String] = ParallelCollectionRDD[122] at parallelize at <console>:53
defined class Bank
bank: org.apache.spark.sql.DataFrame = [age: int, job: string, marital: string, education: string, balance: int]
"
            }, 
            "text": "import org.apache.commons.io.IOUtils
import java.net.URL
import java.nio.charset.Charset

// Zeppelin creates and injects sc (SparkContext) and sqlContext (HiveContext or SqlContext)
// So you don't need create them manually

// load bank data
val bankText = sc.parallelize(
    IOUtils.toString(
        new URL(\"http://emr-sample-projects.oss-cn-hangzhou.aliyuncs.com/bank.csv\"),
        Charset.forName(\"utf8\")).split(\"\\n\"))

case class Bank(age: Integer, job: String, marital: String, education: String, balance: Integer)

val bank = bankText.map(s => s.split(\";\")).filter(s => s(0) != \"\\\"age\\\"\").map(
    s => Bank(s(0).toInt, 
            s(1).replaceAll(\"\\\"\", \"\"),
            s(2).replaceAll(\"\\\"\", \"\"),
            s(3).replaceAll(\"\\\"\", \"\"),
            s(5).replaceAll(\"\\\"\", \"\").toInt
        )
).toDF()
bank.registerTempTable(\"bank\")"
        }, 
        {
            "config": {
                "colWidth": 12, 
                "graph": {
                    "mode": "pieChart", 
                    "height": 300, 
                    "optionOpen": false, 
                    "keys": [
                        {
                            "name": "age", 
                            "index": 0, 
                            "aggr": "sum"
                        }
                    ], 
                    "values": [
                        {
                            "name": "value", 
                            "index": 1, 
                            "aggr": "sum"
                        }
                    ], 
                    "groups": [ ], 
                    "scatter": {
                        "xAxis": {
                            "name": "age", 
                            "index": 0, 
                            "aggr": "sum"
                        }, 
                        "yAxis": {
                            "name": "value", 
                            "index": 1, 
                            "aggr": "sum"
                        }
                    }
                }, 
                "enabled": true
            }, 
            "settings": {
                "params": { }, 
                "forms": {
                    "maxAge": {
                        "name": "maxAge", 
                        "defaultValue": "30", 
                        "hidden": false
                    }
                }
            }, 
            "jobName": "paragraph_1462958072998_2112562726", 
            "id": "20160511-171432_33662638", 
            "dateCreated": "May 11, 2016 5:14:32 PM", 
            "status": "FINISHED", 
            "progressUpdateIntervalMs": 500, 
            "focus": true, 
            "$$hashKey": "object:1288", 
            "dateUpdated": "May 11, 2016 5:14:49 PM", 
            "dateFinished": "May 11, 2016 5:14:45 PM", 
            "dateStarted": "May 11, 2016 5:14:44 PM", 
            "result": {
                "code": "SUCCESS", 
                "type": "TABLE", 
                "msg": "age	value
19	4
20	3
21	7
22	9
23	20
24	24
25	44
26	77
27	94
28	103
29	97
", 
                "comment": "", 
                "msgTable": [
                    [
                        {
                            "key": "value", 
                            "value": "19"
                        }, 
                        {
                            "key": "value", 
                            "value": "4"
                        }
                    ], 
                    [
                        {
                            "value": "20"
                        }, 
                        {
                            "value": "3"
                        }
                    ], 
                    [
                        {
                            "value": "21"
                        }, 
                        {
                            "value": "7"
                        }
                    ], 
                    [
                        {
                            "value": "22"
                        }, 
                        {
                            "value": "9"
                        }
                    ], 
                    [
                        {
                            "value": "23"
                        }, 
                        {
                            "value": "20"
                        }
                    ], 
                    [
                        {
                            "value": "24"
                        }, 
                        {
                            "value": "24"
                        }
                    ], 
                    [
                        {
                            "value": "25"
                        }, 
                        {
                            "value": "44"
                        }
                    ], 
                    [
                        {
                            "value": "26"
                        }, 
                        {
                            "value": "77"
                        }
                    ], 
                    [
                        {
                            "value": "27"
                        }, 
                        {
                            "value": "94"
                        }
                    ], 
                    [
                        {
                            "value": "28"
                        }, 
                        {
                            "value": "103"
                        }
                    ], 
                    [
                        {
                            "value": "29"
                        }, 
                        {
                            "value": "97"
                        }
                    ]
                ], 
                "columnNames": [
                    {
                        "name": "age", 
                        "index": 0, 
                        "aggr": "sum"
                    }, 
                    {
                        "name": "value", 
                        "index": 1, 
                        "aggr": "sum"
                    }
                ], 
                "rows": [
                    [
                        "19", 
                        "4"
                    ], 
                    [
                        "20", 
                        "3"
                    ], 
                    [
                        "21", 
                        "7"
                    ], 
                    [
                        "22", 
                        "9"
                    ], 
                    [
                        "23", 
                        "20"
                    ], 
                    [
                        "24", 
                        "24"
                    ], 
                    [
                        "25", 
                        "44"
                    ], 
                    [
                        "26", 
                        "77"
                    ], 
                    [
                        "27", 
                        "94"
                    ], 
                    [
                        "28", 
                        "103"
                    ], 
                    [
                        "29", 
                        "97"
                    ]
                ]
            }, 
            "text": "%sql 
select age, count(1) value 
from bank 
where age < ${maxAge=30} 
group by age 
order by age"
        }, 
        {
            "config": {
                "colWidth": 12, 
                "graph": {
                    "mode": "stackedAreaChart", 
                    "height": 300, 
                    "optionOpen": false, 
                    "keys": [
                        {
                            "name": "age", 
                            "index": 0, 
                            "aggr": "sum"
                        }
                    ], 
                    "values": [
                        {
                            "name": "value", 
                            "index": 1, 
                            "aggr": "sum"
                        }
                    ], 
                    "groups": [ ], 
                    "scatter": {
                        "xAxis": {
                            "name": "age", 
                            "index": 0, 
                            "aggr": "sum"
                        }, 
                        "yAxis": {
                            "name": "value", 
                            "index": 1, 
                            "aggr": "sum"
                        }
                    }
                }, 
                "enabled": true
            }, 
            "settings": {
                "params": { }, 
                "forms": {
                    "maxAge": {
                        "name": "maxAge", 
                        "defaultValue": "30", 
                        "hidden": false
                    }
                }
            }, 
            "jobName": "paragraph_1462958084871_794797743", 
            "id": "20160511-171444_1632334900", 
            "dateCreated": "May 11, 2016 5:14:44 PM", 
            "status": "FINISHED", 
            "progressUpdateIntervalMs": 500, 
            "focus": true, 
            "$$hashKey": "object:1308", 
            "dateUpdated": "May 11, 2016 5:15:12 PM", 
            "dateFinished": "May 11, 2016 5:15:05 PM", 
            "dateStarted": "May 11, 2016 5:15:04 PM", 
            "result": {
                "code": "SUCCESS", 
                "type": "TABLE", 
                "msg": "age	value
19	4
20	3
21	7
22	9
23	20
24	24
25	44
26	77
27	94
28	103
29	97
", 
                "comment": "", 
                "msgTable": [
                    [
                        {
                            "key": "value", 
                            "value": "19"
                        }, 
                        {
                            "key": "value", 
                            "value": "4"
                        }
                    ], 
                    [
                        {
                            "value": "20"
                        }, 
                        {
                            "value": "3"
                        }
                    ], 
                    [
                        {
                            "value": "21"
                        }, 
                        {
                            "value": "7"
                        }
                    ], 
                    [
                        {
                            "value": "22"
                        }, 
                        {
                            "value": "9"
                        }
                    ], 
                    [
                        {
                            "value": "23"
                        }, 
                        {
                            "value": "20"
                        }
                    ], 
                    [
                        {
                            "value": "24"
                        }, 
                        {
                            "value": "24"
                        }
                    ], 
                    [
                        {
                            "value": "25"
                        }, 
                        {
                            "value": "44"
                        }
                    ], 
                    [
                        {
                            "value": "26"
                        }, 
                        {
                            "value": "77"
                        }
                    ], 
                    [
                        {
                            "value": "27"
                        }, 
                        {
                            "value": "94"
                        }
                    ], 
                    [
                        {
                            "value": "28"
                        }, 
                        {
                            "value": "103"
                        }
                    ], 
                    [
                        {
                            "value": "29"
                        }, 
                        {
                            "value": "97"
                        }
                    ]
                ], 
                "columnNames": [
                    {
                        "name": "age", 
                        "index": 0, 
                        "aggr": "sum"
                    }, 
                    {
                        "name": "value", 
                        "index": 1, 
                        "aggr": "sum"
                    }
                ], 
                "rows": [
                    [
                        "19", 
                        "4"
                    ], 
                    [
                        "20", 
                        "3"
                    ], 
                    [
                        "21", 
                        "7"
                    ], 
                    [
                        "22", 
                        "9"
                    ], 
                    [
                        "23", 
                        "20"
                    ], 
                    [
                        "24", 
                        "24"
                    ], 
                    [
                        "25", 
                        "44"
                    ], 
                    [
                        "26", 
                        "77"
                    ], 
                    [
                        "27", 
                        "94"
                    ], 
                    [
                        "28", 
                        "103"
                    ], 
                    [
                        "29", 
                        "97"
                    ]
                ]
            }, 
            "text": "%sql 
select age, count(1) value 
from bank 
where age < ${maxAge=30} 
group by age 
order by age"
        }, 
        {
            "config": {
                "colWidth": 12, 
                "graph": {
                    "mode": "multiBarChart", 
                    "height": 300, 
                    "optionOpen": false, 
                    "keys": [
                        {
                            "name": "age", 
                            "index": 0, 
                            "aggr": "sum"
                        }
                    ], 
                    "values": [
                        {
                            "name": "value", 
                            "index": 1, 
                            "aggr": "sum"
                        }
                    ], 
                    "groups": [ ], 
                    "scatter": {
                        "xAxis": {
                            "name": "age", 
                            "index": 0, 
                            "aggr": "sum"
                        }, 
                        "yAxis": {
                            "name": "value", 
                            "index": 1, 
                            "aggr": "sum"
                        }
                    }
                }, 
                "enabled": true, 
                "editorMode": "ace/mode/sql"
            }, 
            "settings": {
                "params": { }, 
                "forms": {
                    "marital": {
                        "name": "marital", 
                        "defaultValue": "single", 
                        "options": [
                            {
                                "value": "single"
                            }, 
                            {
                                "value": "divorced"
                            }, 
                            {
                                "value": "married"
                            }
                        ], 
                        "hidden": false
                    }
                }
            }, 
            "jobName": "paragraph_1462958147569_-1710779039", 
            "id": "20160511-171547_1821534288", 
            "dateCreated": "May 11, 2016 5:15:47 PM", 
            "status": "FINISHED", 
            "progressUpdateIntervalMs": 500, 
            "focus": true, 
            "$$hashKey": "object:1365", 
            "dateUpdated": "May 11, 2016 5:16:08 PM", 
            "dateFinished": "May 11, 2016 5:16:02 PM", 
            "dateStarted": "May 11, 2016 5:16:02 PM", 
            "result": {
                "code": "SUCCESS", 
                "type": "TABLE", 
                "msg": "age	value
19	4
20	3
21	7
22	9
23	17
24	13
25	33
26	56
27	64
28	78
29	56
30	92
31	86
32	105
33	61
34	75
35	46
36	50
37	43
38	44
39	30
40	25
41	19
42	23
43	21
44	20
45	15
46	14
47	12
48	12
49	11
50	8
51	6
52	9
53	4
55	3
56	3
57	2
58	7
59	2
60	5
66	2
69	1
", 
                "comment": "", 
                "msgTable": [
                    [
                        {
                            "key": "value", 
                            "value": "19"
                        }, 
                        {
                            "key": "value", 
                            "value": "4"
                        }
                    ], 
                    [
                        {
                            "value": "20"
                        }, 
                        {
                            "value": "3"
                        }
                    ], 
                    [
                        {
                            "value": "21"
                        }, 
                        {
                            "value": "7"
                        }
                    ], 
                    [
                        {
                            "value": "22"
                        }, 
                        {
                            "value": "9"
                        }
                    ], 
                    [
                        {
                            "value": "23"
                        }, 
                        {
                            "value": "17"
                        }
                    ], 
                    [
                        {
                            "value": "24"
                        }, 
                        {
                            "value": "13"
                        }
                    ], 
                    [
                        {
                            "value": "25"
                        }, 
                        {
                            "value": "33"
                        }
                    ], 
                    [
                        {
                            "value": "26"
                        }, 
                        {
                            "value": "56"
                        }
                    ], 
                    [
                        {
                            "value": "27"
                        }, 
                        {
                            "value": "64"
                        }
                    ], 
                    [
                        {
                            "value": "28"
                        }, 
                        {
                            "value": "78"
                        }
                    ], 
                    [
                        {
                            "value": "29"
                        }, 
                        {
                            "value": "56"
                        }
                    ], 
                    [
                        {
                            "value": "30"
                        }, 
                        {
                            "value": "92"
                        }
                    ], 
                    [
                        {
                            "value": "31"
                        }, 
                        {
                            "value": "86"
                        }
                    ], 
                    [
                        {
                            "value": "32"
                        }, 
                        {
                            "value": "105"
                        }
                    ], 
                    [
                        {
                            "value": "33"
                        }, 
                        {
                            "value": "61"
                        }
                    ], 
                    [
                        {
                            "value": "34"
                        }, 
                        {
                            "value": "75"
                        }
                    ], 
                    [
                        {
                            "value": "35"
                        }, 
                        {
                            "value": "46"
                        }
                    ], 
                    [
                        {
                            "value": "36"
                        }, 
                        {
                            "value": "50"
                        }
                    ], 
                    [
                        {
                            "value": "37"
                        }, 
                        {
                            "value": "43"
                        }
                    ], 
                    [
                        {
                            "value": "38"
                        }, 
                        {
                            "value": "44"
                        }
                    ], 
                    [
                        {
                            "value": "39"
                        }, 
                        {
                            "value": "30"
                        }
                    ], 
                    [
                        {
                            "value": "40"
                        }, 
                        {
                            "value": "25"
                        }
                    ], 
                    [
                        {
                            "value": "41"
                        }, 
                        {
                            "value": "19"
                        }
                    ], 
                    [
                        {
                            "value": "42"
                        }, 
                        {
                            "value": "23"
                        }
                    ], 
                    [
                        {
                            "value": "43"
                        }, 
                        {
                            "value": "21"
                        }
                    ], 
                    [
                        {
                            "value": "44"
                        }, 
                        {
                            "value": "20"
                        }
                    ], 
                    [
                        {
                            "value": "45"
                        }, 
                        {
                            "value": "15"
                        }
                    ], 
                    [
                        {
                            "value": "46"
                        }, 
                        {
                            "value": "14"
                        }
                    ], 
                    [
                        {
                            "value": "47"
                        }, 
                        {
                            "value": "12"
                        }
                    ], 
                    [
                        {
                            "value": "48"
                        }, 
                        {
                            "value": "12"
                        }
                    ], 
                    [
                        {
                            "value": "49"
                        }, 
                        {
                            "value": "11"
                        }
                    ], 
                    [
                        {
                            "value": "50"
                        }, 
                        {
                            "value": "8"
                        }
                    ], 
                    [
                        {
                            "value": "51"
                        }, 
                        {
                            "value": "6"
                        }
                    ], 
                    [
                        {
                            "value": "52"
                        }, 
                        {
                            "value": "9"
                        }
                    ], 
                    [
                        {
                            "value": "53"
                        }, 
                        {
                            "value": "4"
                        }
                    ], 
                    [
                        {
                            "value": "55"
                        }, 
                        {
                            "value": "3"
                        }
                    ], 
                    [
                        {
                            "value": "56"
                        }, 
                        {
                            "value": "3"
                        }
                    ], 
                    [
                        {
                            "value": "57"
                        }, 
                        {
                            "value": "2"
                        }
                    ], 
                    [
                        {
                            "value": "58"
                        }, 
                        {
                            "value": "7"
                        }
                    ], 
                    [
                        {
                            "value": "59"
                        }, 
                        {
                            "value": "2"
                        }
                    ], 
                    [
                        {
                            "value": "60"
                        }, 
                        {
                            "value": "5"
                        }
                    ], 
                    [
                        {
                            "value": "66"
                        }, 
                        {
                            "value": "2"
                        }
                    ], 
                    [
                        {
                            "value": "69"
                        }, 
                        {
                            "value": "1"
                        }
                    ]
                ], 
                "columnNames": [
                    {
                        "name": "age", 
                        "index": 0, 
                        "aggr": "sum"
                    }, 
                    {
                        "name": "value", 
                        "index": 1, 
                        "aggr": "sum"
                    }
                ], 
                "rows": [
                    [
                        "19", 
                        "4"
                    ], 
                    [
                        "20", 
                        "3"
                    ], 
                    [
                        "21", 
                        "7"
                    ], 
                    [
                        "22", 
                        "9"
                    ], 
                    [
                        "23", 
                        "17"
                    ], 
                    [
                        "24", 
                        "13"
                    ], 
                    [
                        "25", 
                        "33"
                    ], 
                    [
                        "26", 
                        "56"
                    ], 
                    [
                        "27", 
                        "64"
                    ], 
                    [
                        "28", 
                        "78"
                    ], 
                    [
                        "29", 
                        "56"
                    ], 
                    [
                        "30", 
                        "92"
                    ], 
                    [
                        "31", 
                        "86"
                    ], 
                    [
                        "32", 
                        "105"
                    ], 
                    [
                        "33", 
                        "61"
                    ], 
                    [
                        "34", 
                        "75"
                    ], 
                    [
                        "35", 
                        "46"
                    ], 
                    [
                        "36", 
                        "50"
                    ], 
                    [
                        "37", 
                        "43"
                    ], 
                    [
                        "38", 
                        "44"
                    ], 
                    [
                        "39", 
                        "30"
                    ], 
                    [
                        "40", 
                        "25"
                    ], 
                    [
                        "41", 
                        "19"
                    ], 
                    [
                        "42", 
                        "23"
                    ], 
                    [
                        "43", 
                        "21"
                    ], 
                    [
                        "44", 
                        "20"
                    ], 
                    [
                        "45", 
                        "15"
                    ], 
                    [
                        "46", 
                        "14"
                    ], 
                    [
                        "47", 
                        "12"
                    ], 
                    [
                        "48", 
                        "12"
                    ], 
                    [
                        "49", 
                        "11"
                    ], 
                    [
                        "50", 
                        "8"
                    ], 
                    [
                        "51", 
                        "6"
                    ], 
                    [
                        "52", 
                        "9"
                    ], 
                    [
                        "53", 
                        "4"
                    ], 
                    [
                        "55", 
                        "3"
                    ], 
                    [
                        "56", 
                        "3"
                    ], 
                    [
                        "57", 
                        "2"
                    ], 
                    [
                        "58", 
                        "7"
                    ], 
                    [
                        "59", 
                        "2"
                    ], 
                    [
                        "60", 
                        "5"
                    ], 
                    [
                        "66", 
                        "2"
                    ], 
                    [
                        "69", 
                        "1"
                    ]
                ]
            }, 
            "text": "%sql 
select age, count(1) value 
from bank 
where marital=\"${marital=single,single|divorced|married}\" 
group by age 
order by age"
        }, 
        {
            "config": {
                "colWidth": 12, 
                "graph": {
                    "mode": "table", 
                    "height": 300, 
                    "optionOpen": false, 
                    "keys": [ ], 
                    "values": [ ], 
                    "groups": [ ], 
                    "scatter": { }
                }, 
                "enabled": true
            }, 
            "settings": {
                "params": { }, 
                "forms": { }
            }, 
            "jobName": "paragraph_1462958162324_92385814", 
            "id": "20160511-171602_2034810934", 
            "dateCreated": "May 11, 2016 5:16:02 PM", 
            "status": "READY", 
            "progressUpdateIntervalMs": 500, 
            "focus": true, 
            "$$hashKey": "object:1384"
        }
    ], 
    "name": "Zepplein sample", 
    "id": "2BM7SAUS5", 
    "angularObjects": {
        "2BK5V3MVS": [ ], 
        "2BM8A3N52": [ ], 
        "2BHMPK6D2": [ ], 
        "2BJMQ1ZYK": [ ], 
        "2BNA1E4R9": [ ], 
        "2BJ8AMDAV": [ ], 
        "2BM4G3RVC": [ ], 
        "2BHY4C52B": [ ], 
        "2BMVXXB2C": [ ], 
        "2BKY35BQK": [ ], 
        "2BK7BWR9F": [ ], 
        "2BHPPXCTP": [ ], 
        "2BJKQDHSH": [ ], 
        "2BKZUHKYK": [ ]
    }, 
    "config": {
        "looknfeel": "default"
    }, 
    "info": { }
}
